:root { --bg:#ffffff; --text:#1a1a1a; --primary:#d32f2f; --secondary:#fbc02d; --card:#ffffff; --error:#c62828 }
* { box-sizing: border-box; font-family: system-ui, Arial, sans-serif }
body { margin:0; background:var(--bg); color:var(--text) }
.app-header { display:flex; align-items:center; justify-content:space-between; padding:16px 24px; background:#fff; border-bottom:4px solid var(--primary) }
.nav { display:flex; align-items:center; gap:8px }
.nav-toggle { display:none; padding:8px 12px; border:1px solid #ddd; background:#fff; cursor:pointer }
.nav-links { display:flex; align-items:center; flex-wrap:wrap; gap:8px }
.nav button { margin-right:8px; padding:8px 12px; border:1px solid #ddd; background:#fff; cursor:pointer }
.nav button:hover { background:#fff8e1; border-color:var(--secondary) }
.nav a { margin-right:8px; padding:8px 12px; border:1px solid #ddd; background:#fff; cursor:pointer; text-decoration:none; color:inherit }
.nav a:hover { background:#fff8e1; border-color:var(--secondary) }
.btn { display:inline-block; padding:10px 14px; background:var(--primary); color:#fff; border-radius:4px; text-decoration:none }
.view { padding:24px }
.grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:16px }
.page { max-width: 1200px; margin: 0 auto }
.card { background:var(--card); border:1px solid #e5e7eb; border-radius:8px; padding:16px }
.card-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; margin-bottom:12px }
.card-header h3 { margin:0 }
.card-header p { margin:4px 0 0; color:#616161; font-size:0.9rem }
.btn.ghost { background:transparent; color:var(--primary); border:1px solid rgba(211,47,47,.35); padding:8px 12px }
.btn.ghost:hover { background:rgba(211,47,47,.08) }
.btn.small { padding:6px 10px; font-size:0.85rem }
.summary-list { display:flex; flex-direction:column; border:1px solid #e5e7eb; border-radius:10px; overflow:hidden }
.summary-item { border:none; border-radius:0; padding:12px 14px; display:grid; grid-template-columns: minmax(0,1fr) auto; gap:12px; align-items:center; border-bottom:1px solid #e5e7eb }
.summary-item:last-child { border-bottom:none }
.summary-item h4 { margin:0 0 4px; font-size:1rem; display:flex; align-items:center; gap:6px }
.summary-item p { margin:0; color:#374151; font-size:0.95rem }
.summary-meta { display:flex; flex-wrap:wrap; gap:8px; font-size:0.85rem; color:#6b7280; margin-top:6px }
.muted { color:#9ca3af; font-size:0.9rem }
.badge.danger { background:rgba(211,47,47,.1); color:#b71c1c; border:1px solid rgba(211,47,47,.3); padding:2px 6px; font-size:0.75rem }
.summary-item .btn.small { justify-self:flex-end }
.summary-item button { white-space:nowrap }
.modal-header { display:flex; align-items:center; justify-content:space-between; gap:12px }
.modal-body { padding-top:0 }
.detail-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:12px; margin-bottom:16px }
.detail-grid dt { font-weight:600; font-size:0.85rem; color:#6b7280 }
.detail-grid dd { margin:0; font-size:0.95rem }
.detail-list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:12px }
.detail-list li { border:1px solid #e5e7eb; border-radius:8px; padding:12px }
.detail-list strong { display:block; margin-bottom:4px }
.detail-list small { color:#6b7280 }
.summary-content { display:flex; flex-direction:column }
dialog.modal { border:none; border-radius:14px; padding:0; width:min(620px, 92vw); box-shadow:0 30px 60px rgba(15,23,42,.25) }
dialog.modal::backdrop { background:rgba(15,23,42,.55); backdrop-filter:blur(2px) }
dialog.modal form { margin:0; padding:0 }
dialog.modal .modal-header { padding:16px 20px; border-bottom:1px solid #e5e7eb }
dialog.modal .modal-body { padding:20px }
.filters { display:flex; gap:8px; margin-bottom:12px }
input, select { padding:8px; border:1px solid #d1d5db; border-radius:4px; width:100% }

/* Forms */
.card form { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:12px }
.card label { display:flex; flex-direction:column; gap:6px; font-weight:600 }
.card label small { font-weight:400; color:#616161 }
.filters { flex-wrap:wrap }
.filters select, .filters input { flex: 1 1 180px }
input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 2px rgba(211,47,47,.15) }
button[type=submit], #dispatchBtn, .modal-actions .forced-red-button { background:var(--primary); color:#fff; border:none; border-radius:4px; padding:10px 14px; cursor:pointer }
.actions .btn:first-child { background: var(--primary); color:#fff }
.actions .btn:last-child { background: var(--secondary); color:#1a1a1a }
#dispatchBtn { background: var(--secondary); color:#1a1a1a }
.table-wrapper { overflow-x:auto }
.table { width:100%; border-collapse: collapse; table-layout: fixed }
.table td { border-bottom:1px solid #eee; padding:8px }
.table thead th { font-weight:600; background:#fffdf5 }
.table thead th { position: sticky; top:0; background:#fffdf5; z-index:1 }
.table tbody td { background:#fff }
.error { color:var(--error); margin-top:8px }
.toast { position: fixed; right:16px; bottom:16px; background:var(--primary); color:#fff; padding:12px 16px; border-radius:6px; box-shadow: 0 2px 8px rgba(0,0,0,.2) }
.actions button { margin-right:8px }

/* Severity badges */
.badge { display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:9999px; font-weight:600; font-size: 0.9rem }
.severity-alta { background: rgba(211,47,47,.12); color: #b71c1c; border: 1px solid rgba(211,47,47,.3) }
.severity-media { background: rgba(251,192,45,.18); color: #8d6e00; border: 1px solid rgba(251,192,45,.35) }
.severity-baixa { background: rgba(158,158,158,.16); color: #424242; border: 1px solid rgba(158,158,158,.3) }

/* Canvas responsive */
canvas { max-width: 100%; height: auto }

/* Media queries */
@media (max-width: 768px) {
  .view { padding: 16px }
  .app-header { padding: 12px 16px }
  .nav { flex-wrap:wrap }
  .nav-toggle { display:block }
  .nav-links { display:none; flex-direction: column; width:100% }
  .nav.open .nav-links { display:flex }
  .nav a, .nav button { width:100%; margin-right:0 }
}
@media (max-width: 480px) {
  .btn { width: 100% }
  .nav a, .nav button { padding: 8px 10px }
}

/* Layout especial para a página de Ocorrências */
body[data-page="occurrences"] .grid {
  display: grid;
  grid-template-columns: 1fr 2fr; /* cadastro menor, mapa maior */
  grid-template-rows: auto auto;
  gap: 16px;
}

/* 1º card = Cadastro (coluna esquerda) */
body[data-page="occurrences"] .grid .card:nth-child(1) {
  grid-column: 1;
  grid-row: 1;
}

/* 3º card = Mapa (coluna direita) */
body[data-page="occurrences"] .grid .card:nth-child(3) {
  grid-column: 2;
  grid-row: 1;
}

/* 2º card = Lista (linha de baixo / ocupa tudo) */
body[data-page="occurrences"] .grid .card:nth-child(2) {
  grid-column: 1 / 3;
  grid-row: 2;
}

/* Layout especial para a página de Despacho (mapa embaixo) */
body[data-page="dispatch"] .grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto;
  gap: 16px;
}
body[data-page="dispatch"] .grid .card:nth-child(1) {
  grid-column: 1;
  grid-row: 1;
}
body[data-page="dispatch"] .grid .card:nth-child(2) {
  grid-column: 2;
  grid-row: 1;
}
body[data-page="dispatch"] .grid .card:nth-child(3) {
  grid-column: 1 / 3;
  grid-row: 2;
}

body[data-page="dashboard"] .view { display:grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto auto; gap:16px }
body[data-page="dashboard"] .view .grid { display:contents }
body[data-page="dashboard"] .view .grid .card:nth-child(1) { grid-column:1; grid-row:1 }
body[data-page="dashboard"] .view .grid .card:nth-child(2) { grid-column:1; grid-row:2 }
body[data-page="dashboard"] .view .grid .card:nth-child(3) { grid-column:2; grid-row:2 }
body[data-page="dashboard"] .view > .card { grid-column:2; grid-row:1 }
/* modal padrão */
.modal-overlay { display:flex; align-items:center; justify-content:center; position:fixed; inset:0; background:rgba(15,23,42,.6); z-index:1000 }
.modal-card { background:var(--card); border-radius:12px; padding:24px; max-width:420px; width:90%; box-shadow:0 20px 40px rgba(0,0,0,.25); border:1px solid rgba(0,0,0,.1); }
.modal-card-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px; margin-bottom:12px }
.modal-card-header h3 { margin:0; color:var(--primary) }
.modal-form { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:12px }
.modal-form label { display:flex; flex-direction:column; gap:6px; font-weight:600 }
.modal-form .error { grid-column: 1 / -1 }
.icon-button { border:none; background:none; padding:6px 10px; cursor:pointer; font-size:1.2rem; color:#1f2937; }
.icon-button:hover { background:rgba(0,0,0,.04); border-radius:6px }
.modal-actions { display:flex; justify-content:flex-end; gap:10px; margin-top:18px }
.modal-actions button { border:1px solid #d1d5db; background:#fff; color:#1a1a1a; padding:10px 16px; border-radius:6px; font-weight:600; cursor:pointer }
.modal-actions .btn { border:none }
.modal-overlay[hidden] { display:none !important}

