:root { --bg:#ffffff; --text:#1a1a1a; --primary:#d32f2f; --secondary:#fbc02d; --card:#ffffff; --error:#c62828 }
* { box-sizing: border-box; font-family: system-ui, Arial, sans-serif }
body { margin:0; background:var(--bg); color:var(--text) }
.app-header { display:flex; align-items:center; justify-content:space-between; padding:16px 24px; background:#fff; border-bottom:4px solid var(--primary) }
.nav { display:flex; align-items:center; gap:8px }
.nav-toggle { display:none; padding:8px 12px; border:1px solid #ddd; background:#fff; cursor:pointer }
.nav-links { display:flex; align-items:center; flex-wrap:wrap; gap:8px }
.nav button { margin-right:8px; padding:8px 12px; border:1px solid #ddd; background:#fff; cursor:pointer }
.nav button:hover { background:#fff8e1; border-color:var(--secondary) }
.nav a { margin-right:8px; padding:8px 12px; border:1px solid #ddd; background:#fff; cursor:pointer; text-decoration:none; color:inherit }
.nav a:hover { background:#fff8e1; border-color:var(--secondary) }
.btn { display:inline-block; padding:10px 14px; background:var(--primary); color:#fff; border-radius:4px; text-decoration:none }
.view { padding:24px }
.grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:16px }
.page { max-width: 1200px; margin: 0 auto }
.card { background:var(--card); border:1px solid #e5e7eb; border-radius:8px; padding:16px }
.filters { display:flex; gap:8px; margin-bottom:12px }
input, select { padding:8px; border:1px solid #d1d5db; border-radius:4px; width:100% }

/* Forms */
.card form { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:12px }
.card label { display:flex; flex-direction:column; gap:6px; font-weight:600 }
.card label small { font-weight:400; color:#616161 }
.filters { flex-wrap:wrap }
.filters select, .filters input { flex: 1 1 180px }
input:focus, select:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 2px rgba(211,47,47,.15) }
button[type=submit], #dispatchBtn { background:var(--primary); color:#fff; border:none; border-radius:4px; padding:10px 14px; cursor:pointer }
.actions .btn:first-child { background: var(--primary); color:#fff }
.actions .btn:last-child { background: var(--secondary); color:#1a1a1a }
#dispatchBtn { background: var(--secondary); color:#1a1a1a }
.table { width:100%; border-collapse: collapse }
.table td { border-bottom:1px solid #eee; padding:8px }
.table tr:first-child td { font-weight: 600; background: #fffdf5 }
/* Responsive table scroll */
.table { display: block; overflow-x: auto }
.error { color:var(--error); margin-top:8px }
.toast { position: fixed; right:16px; bottom:16px; background:var(--primary); color:#fff; padding:12px 16px; border-radius:6px; box-shadow: 0 2px 8px rgba(0,0,0,.2) }
.actions button { margin-right:8px }

/* Severity badges */
.badge { display:inline-flex; align-items:center; gap:6px; padding:4px 10px; border-radius:9999px; font-weight:600; font-size: 0.9rem }
.severity-alta { background: rgba(211,47,47,.12); color: #b71c1c; border: 1px solid rgba(211,47,47,.3) }
.severity-media { background: rgba(251,192,45,.18); color: #8d6e00; border: 1px solid rgba(251,192,45,.35) }
.severity-baixa { background: rgba(158,158,158,.16); color: #424242; border: 1px solid rgba(158,158,158,.3) }

/* Canvas responsive */
canvas { max-width: 100%; height: auto }

/* Media queries */
@media (max-width: 768px) {
  .view { padding: 16px }
  .app-header { padding: 12px 16px }
  .nav { flex-wrap:wrap }
  .nav-toggle { display:block }
  .nav-links { display:none; flex-direction: column; width:100% }
  .nav.open .nav-links { display:flex }
  .nav a, .nav button { width:100%; margin-right:0 }
}
@media (max-width: 480px) {
  .btn { width: 100% }
  .nav a, .nav button { padding: 8px 10px }
}

/* Layout especial para a página de Ocorrências */
body[data-page="occurrences"] .grid {
  display: grid;
  grid-template-columns: 1fr 2fr; /* cadastro menor, mapa maior */
  grid-template-rows: auto auto;
  gap: 16px;
}

/* 1º card = Cadastro (coluna esquerda) */
body[data-page="occurrences"] .grid .card:nth-child(1) {
  grid-column: 1;
  grid-row: 1;
}

/* 3º card = Mapa (coluna direita) */
body[data-page="occurrences"] .grid .card:nth-child(3) {
  grid-column: 2;
  grid-row: 1;
}

/* 2º card = Lista (linha de baixo / ocupa tudo) */
body[data-page="occurrences"] .grid .card:nth-child(2) {
  grid-column: 1 / 3;
  grid-row: 2;
}

/* Layout especial para a página de Despacho (mapa embaixo) */
body[data-page="dispatch"] .grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto;
  gap: 16px;
}
body[data-page="dispatch"] .grid .card:nth-child(1) {
  grid-column: 1;
  grid-row: 1;
}
body[data-page="dispatch"] .grid .card:nth-child(2) {
  grid-column: 2;
  grid-row: 1;
}
body[data-page="dispatch"] .grid .card:nth-child(3) {
  grid-column: 1 / 3;
  grid-row: 2;
}

body[data-page="dashboard"] .view { display:grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto auto; gap:16px }
body[data-page="dashboard"] .view .grid { display:contents }
body[data-page="dashboard"] .view .grid .card:nth-child(1) { grid-column:1; grid-row:1 }
body[data-page="dashboard"] .view .grid .card:nth-child(2) { grid-column:1; grid-row:2 }
body[data-page="dashboard"] .view .grid .card:nth-child(3) { grid-column:2; grid-row:2 }
body[data-page="dashboard"] .view > .card { grid-column:2; grid-row:1 }

